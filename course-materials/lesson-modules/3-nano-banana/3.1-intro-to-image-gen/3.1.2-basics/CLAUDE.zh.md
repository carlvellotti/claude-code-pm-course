# 模块 3.1.2: 理解基础

**Claude Code 教学脚本**

---

## 教学流程

欢迎回来！在 3.1.1 中，你生成了你的第一张图像 - 相当神奇，对吧？

现在让我们理解引擎盖下实际发生了什么。

停止：准备好看看幕后了吗？

用户：是的 / 准备好了

---

当你要求我生成那张图像时，我正在代表你调用 Google 的 Gemini API。

Gemini 3 Pro - 代号“Nano Banana Pro” - 是当今可用的最强大的图像生成模型之一。

直接使用 API（相对于 Google 自己的应用程序）的一件很酷的事情是它稍微宽松一些。例如，你可以使用真正的名人作为参考图像 - 这是消费者应用程序会阻止的。

而且你有我作为你的创意伙伴。我处理所有的技术事务 - API 调用、会话管理、文件保存 - 而你专注于创意愿景。

停止：目前为止有道理吗？

用户：是的

---

所有的 API 魔法都住在一个名为 `image_gen.py` 的预构建脚本中。

行动：读取 `image_gen.py` 并显示 `generate()` 的关键函数签名

这是你可以控制的：

- **prompt** - 你对要创建内容的描述
- **reference\_images** - 用作视觉输入的照片（我们将在 3.1.3 中涵盖这一点）
- **aspect\_ratio** - 图像的形状（1:1 正方形, 16:9 横向, 9:16 纵向等）
- **resolution** - 尺寸/质量（1K, 2K, 或 4K）

不过你不需要担心任何这些。只需自然地与我合作，我会自动处理 API 调用、参数和文件保存。

让我们试一试。描述任何你想创建的图像。

要具有描述性 - 包括主体、设置、光照、情绪。这个模型好得令人难以置信，所以真的发挥你的想象力。

停止：你想生成什么？

用户：[描述他们想要的图像]

行动：首先调用 new_session() 以清除任何先前的会话（以防用户从 3.1.1 继续）。然后使用他们的描述生成图像。除非用户要求不同的，否则使用 aspect_ratio="1:1", resolution="1K"

[对生成的图像做出有趣/热情的评论]

你的图像已保存到 `outputs/` 文件夹。

停止：在 Finder 中打开 `outputs/` 文件夹并检查它。你觉得怎么样？

用户：[回应他们的反应]

---

这里有一些强大的东西：如果不完美，你不必从头开始。

我记得我们的对话，所以你可以直接要求更改。这被称为“迭代” - 逐步完善图像。

更棒的是：我继续与 Nano Banana 的会话，这意味着它拥有之前的所有想法。这导致在编辑时结果好得多 - 模型理解你试图实现的完整上下文。

停止：告诉我你想对图像更改的一件事。建议一些想法。

用户：[描述他们想要的更改]

行动：根据他们的反馈生成改进版本（这将继续现有会话）

检查 `outputs/` 文件夹 - 有一个新版本。

停止：好点了吗？想调整其他东西吗？还是我们继续？

用户：[回应]

---

不错！让我们谈谈宽高比 - 你的图像的形状。

这是一些常见选项：

- **1:1** - 正方形（Instagram 帖子，个人资料图片）
- **16:9** - 横向（演示文稿，YouTube 缩略图，桌面壁纸）
- **9:16** - 纵向（Instagram/TikTok 故事，手机壁纸）
- **4:5** - 高矩形（Instagram 信息流帖子 - 比正方形更合适）
- **3:2** - 经典照片比例（类似于 35mm 胶片）

停止：快速测验 - 你会用哪个比例做演示幻灯片？

用户：[回答]

[根据他们的回答回应。如果他们说 16:9 或横向：“完全正确！形状应该匹配你使用图像的地方。”如果错了，温和地纠正并解释为什么 16:9 适合演示文稿。]

---

现在让我们谈谈分辨率 - 图像有多大和多详细。

三个选项：

- **1K** (1024px): 生成最快，大约 20 秒。非常适合迭代和草稿。
- **2K** (2048px): 较慢，大约 30 秒。与 1K 成本相同。适合最终输出。
- **4K** (4096px): 最慢，大约 45 秒。成本更高。只有在需要大规模实物打印时才需要。

对于本课程，我们默认为 1K，这样你可以快速迭代。创意输出的质量没有区别 - 只有分辨率。

当你对结果满意时，你可以以 2K 重新生成以获得精美的最终版本。4K 只有在你需要物理打印时才是必要的。

停止：有道理吗？

用户：是的

---

快速回顾一下你学到了什么：

- Gemini API 驱动图像生成（通过 `image_gen.py`）
- 你可以控制宽高比和分辨率
- 迭代是关键 - 逐步完善图像而不是从头开始
- 使用 1K 制作草稿，2K 制作最终版本

在下一课中，我们将涵盖 **提示词黄金法则** - 如何编写获得惊人结果的提示词 - 以及如何使用参考图像获得一致的风格。

停止：准备好继续到 3.1.3 了吗？

用户：是的 / 准备好了

太好了！当你准备好继续时，运行 `/start-3-1-3`。

行动：结束模块

---

## 给 Claude 的重要提示

**对于图像生成：**
- 使用 `image_gen.py` 中的 `generate()` 函数
- 除非用户另有说明，否则默认为 aspect_ratio="1:1" 和 resolution="1K"
- 输出将自动保存到 `outputs/`
- 迭代时，会话自动继续 - 不要调用 `new_session()`

**对于显示函数签名：**
- 显示 `image_gen.py` 中的 `generate()` 函数定义
- 专注于参数：prompt, reference_images, aspect_ratio, resolution
- 不要显示整个文件 - 只显示相关函数

**如果出了问题：**
- API 密钥错误：让他们检查 3.1.1 中的 `.env` 文件
- 生成失败：检查错误消息，相应地进行故障排除
- 会话问题：如果需要，可以调用 `new_session()` 重新开始

**终端限制：**
- 无法直接显示图像 - 始终告诉用户打开 `outputs/` 文件夹
- 使用 Finder (Mac) 或文件资源管理器 (Windows) 查看生成的图像

**打开图像：** 如果用户在查找图像时遇到困难，主动提出使用 `open [path]` (Mac) 或 `start [path]` (Windows) 为他们打开。

---

## 成功标准

模块 3.1.2 是成功的，如果学生：

- ✅ 理解 Gemini API 驱动图像生成
- ✅ 生成了至少一张他们选择的新图像
- ✅ 成功地对他们的图像进行了迭代（至少做了一次编辑）
- ✅ 理解宽高比以及何时使用每种
- ✅ 理解分辨率选项（1K 用于草稿，2K 用于最终版本）
- ✅ 知道如何继续下一课
