---
title: "3.1.2: 理解基础"
description: "学习 generate() 函数、宽高比、分辨率选项，以及如何迭代您的 AI 生成图像"
keywords: "gemini 参数, 宽高比, 图像分辨率, AI 图像迭代, generate 函数"
---

## 3.1.2: 理解基础

- **完成时间：** 15 分钟
- **先决条件：** API 密钥已设置 (模块 3.1.1)

> **在 Claude Code 中开始此模块：** 运行 `/start-3-1-2` 以启动交互式体验。

## 概览

模块 3.1.2 教您图像生成的机制 - 系统如何工作以及您可以控制什么。您将理解 `generate()` 函数，了解宽高比和分辨率，并掌握迭代的艺术。

**关键要点：** 您不需要记住参数或编写代码。自然地描述您想要什么，Claude 会选择明智的默认值。但是理解可能发生的事情有助于您获得更好的结果。


## 生成如何工作

当您要求 Claude 生成图像时：

1. **您描述** 您想要什么（使用自然语言）
2. **Claude 转换** 您的请求为 API 参数
3. **`generate()` 函数** 将请求发送给 Gemini
4. **Gemini 生成** 图像 (10-15 秒)
5. **图像保存** 到您的 `outputs/` 文件夹
6. **Claude 告诉您** 在哪里找到它

您永远不会直接接触 API。Claude 处理一切。


## `generate()` 函数

所有图像生成都流经 `image_gen.py`。以下是关键参数：

| 参数 | 它控制什么 | 默认值 |
|-----------|------------------|---------|
| `prompt` | 您的图像描述 | 必需 |
| `reference_images` | 用作视觉输入的照片 | 无 |
| `aspect_ratio` | 输出图像的形状 | 1:1 |
| `resolution` | 输出的大小/质量 | 1K |

### 两种工作方式

**选项 1：让 Claude 决定**
```
Generate a professional headshot of a product manager
```
Claude 选择合理的默认值 (头像用 1:1，草稿用 1K)。

**选项 2：指定您想要的**
```
Generate a professional headshot, 16:9 aspect ratio, 2K resolution
```
Claude 尊重您的明确请求。

两种方法都很有效。从选项 1 开始，需要时具体说明。


## 宽高比

宽高比是您图像的形状。根据您将使用它的位置进行选择。

| 比例 | 形状 | 最适合 |
|-------|-------|----------|
| **1:1** | 正方形 | 个人资料图片，Instagram 帖子，图标 |
| **16:9** | 宽屏横向 | 演示文稿，YouTube 缩略图，主图 |
| **9:16** | 高屏纵向 | Instagram/TikTok 故事，手机壁纸 |
| **4:5** | 高矩形 | Instagram feed 帖子 |
| **3:2** | 经典照片 | 传统摄影比例 |
| **4:3** | 标准 | 旧式演示文稿，平板电脑 |
| **21:9** | 超宽 | 电影感，横幅 |

### 快速参考

- **演示幻灯片？** → 16:9
- **社交媒体帖子？** → 1:1 或 4:5
- **手机模型？** → 9:16
- **网站主图？** → 16:9 或 21:9
- **个人资料图片？** → 1:1


## 分辨率

分辨率决定大小和细节水平。它 **不** 影响创意质量 - 只影响像素尺寸。

| 分辨率 | 尺寸 | 生成时间 | 最适合 |
|------------|------------|-----------------|----------|
| **1K** | 1024px | ~20 秒 | 草稿，迭代，探索 |
| **2K** | 2048px | ~30 秒 | 最终输出，演示文稿 |
| **4K** | 4096px | ~45 秒 | 打印，大型显示器 |

### 分辨率策略

**迭代时使用 1K。** 它更快，成本相同，并让您更快地探索。

**最终版本使用 2K。** 一旦您对创意方向感到满意，以更高分辨率重新生成。

**仅在打印时使用 4K。** 除非您要大规模打印，否则 4K 是多余的。


## 迭代：核心工作流

迭代是图像生成中最重要的概念。与其希望第一次就做对，不如一步步完善。

### 为什么迭代有效

Gemini 是一个“思考模型” - 它在整个对话中保持上下文。当您说“让它更蓝一点”时，它知道“它”指的是什么以及您之前讨论了什么。

**单次尝试方法 (令人沮丧)：**
```
生成完美的图像 → 希望它是对的 → 如果不对就重新开始
```

**迭代方法 (有效)：**
```
生成初稿 → "增加对比度" → "把文字移高一点" → "完美"
```

### 如何迭代

Claude 生成图像后，只需要求更改：

- "Make the background darker" (让背景更暗)
- "Add a subtle shadow" (添加微妙的阴影)
- "Change the text to say 'Launch Day'" (将文字改为 'Launch Day')
- "Make it feel more professional" (让它感觉更专业)
- "Try a warmer color palette" (尝试更暖的调色板)

Claude 继续与 Gemini 的会话，您的更改建立在之前的图像之上。

### 何时重新开始

有时迭代不是正确的举动：

- **主要方向改变** → 使用 `new_session()` 重新开始
- **完全不同的主题** → 重新开始
- **想探索替代方案** → 生成变体 (涵盖在 3.1.3 中)

告诉 Claude "start a new session" (开始新会话) 或 "let's try something completely different" (让我们尝试完全不同的东西)，它将重新开始。


## 会话解释

**会话** 是与 Gemini 保持上下文的对话。它是这样工作的：

**在会话内：**
- Gemini 记住之前的生成
- 您可以引用 "the image" 或 "it"
- 编辑建立在以前的版本之上
- “思维签名”保留推理

**会话之间：**
- 全新开始
- 没有以前工作的记忆
- 适合新项目或方向

### 会话管理

Claude 自动处理会话，但您可以控制它们：

| 您想要什么 | 说什么 |
|---------------|-------------|
| 继续完善 | 只需描述更改 |
| 重新开始 | "Start a new session" |
| 检查状态 | "What's the current session?" |

**专业提示：** 会话最适合线性细化。如果您想探索多个方向，请使用变体 (涵盖在 3.1.3 中)。


## 实践示例

### 示例 1: 演示图形

**您：** "Create a hero image for a presentation about AI productivity" (为关于 AI 生产力的演示创建一个主图)

**Claude 生成** 一张 1K 分辨率的 1:1 图像。

**您：** "Make it 16:9 for my slides" (为我的幻灯片把它改成 16:9)

**Claude 重新生成** 具有正确宽高比的图像。

**您：** "Add text that says 'AI for PMs'" (添加文字 'AI for PMs')

**Claude 添加** 文字覆盖。

**您：** "This is perfect, regenerate at 2K" (这很完美，以 2K 重新生成)

**Claude 制作** 最终的高分辨率版本。

### 示例 2: 快速探索

**您：** "Generate a user persona portrait - corporate vibe" (生成一个用户画像 - 企业氛围)

**Claude 生成** 第一个版本。

**您：** "Try a more casual look" (尝试更随意的外观)

**Claude 完善** 风格。

**您：** "Actually let's start fresh - try illustrated style instead" (实际上让我们重新开始 - 改为尝试插画风格)

**Claude 开始新会话** 并生成插画版本。


## 最佳实践

### 做：
- **从 1K 分辨率开始** 以便更快迭代
- **具体说明更改** - "让天空更橙色" 胜过 "改进它"
- **让 Claude 选择默认值** 当您没有强烈偏好时
- **增量构建** - 小的变化更可预测

### 不做：
- **不要从 4K 开始** - 您会浪费时间在您将要更改的图像上
- **不要一次做多个更改** - 一次迭代一件事
- **不要含糊其辞** - "让它更好" 没有给 Claude 任何工作依据
- **不要放弃好的图像** - 迭代而不是重新开始


## 故障排除

### 更改未应用

- 确保您具体说明了要更改什么
- 尝试重新表述："change the background color to navy blue" (将背景颜色更改为海军蓝) 而不是 "different background" (不同的背景)
- 会话可能混淆了 - 重新开始

### 宽高比看起来不对

- 验证您是否要求了正确的比例 (16:9 vs 9:16 是常见的混淆)
- 某些构图在特定比例下效果更好 - Claude 可能会建议替代方案

### 图像质量似乎很低

- 检查分辨率 - 您可能在 1K (这对于草稿来说没问题)
- 对于最终输出，明确要求 2K 分辨率

### 生成很慢

- 4K 需要 ~45 秒，这感觉很慢但是正常的
- 网络差会增加延迟
- 高 API 负载会导致延迟


## 快速参考卡

```
宽高比:
  1:1   → 正方形 (个人资料, 图标)
  16:9  → 横向 (演示文稿)
  9:16  → 纵向 (故事, 手机)
  4:5   → 高 (Instagram feed)

分辨率:
  1K → 快速草稿
  2K → 最终输出
  4K → 仅限打印

工作流:
  1. 以 1K 生成
  2. 迭代直到满意
  3. 以 2K 重新生成用于最终版
```


## 接下来是什么？

您了解了机制。现在是时候学习艺术了。

**模块 3.1.3** 教授提示的黄金法则 - 如何编写获得惊人结果的描述。您还将了解参考图像和生成变体。

交互式轨道：输入 `/start-3-1-3`


## 资源

- [Gemini 图像生成文档](https://ai.google.dev/gemini-api/docs/image-generation) - 参数、宽高比、分辨率选项
- [Gemini 3 开发者指南](https://ai.google.dev/gemini-api/docs/gemini-3) - 思维签名、多轮会话


---

**关于本课程**

由 [Carl Vellotti](https://www.linkedin.com/in/carlvellotti/) 创建。查看 [The Full Stack PM](https://fullstackpm.com/subscribe?utm_source=ccforpms&utm_medium=course&utm_campaign=nano-banana-basics) 获取更多 PM 建设者内容。

**源存储库：** [github.com/carlvellotti/claude-code-pm-course](https://github.com/carlvellotti/claude-code-pm-course)
